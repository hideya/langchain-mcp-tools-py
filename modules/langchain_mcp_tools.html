<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>langchain_mcp_tools &#8212; langchain-mcp-tools-py v0.2.8 Documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=d997a4c1" />
    <script src="../_static/documentation_options.js?v=b01fafc3"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="langchain-mcp-tools-py" href="../index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">langchain-mcp-tools-py</a></h1>



<p class="blurb">MCP Tools for LangChain v0.2.8</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=hideya&repo=langchain-mcp-tools-py&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>






<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">langchain_mcp_tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#langchain_mcp_tools_docs.McpInitializationError"><code class="docutils literal notranslate"><span class="pre">McpInitializationError</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#langchain_mcp_tools_docs.McpServerCommandBasedConfig"><code class="docutils literal notranslate"><span class="pre">McpServerCommandBasedConfig</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#langchain_mcp_tools_docs.McpServerUrlBasedConfig"><code class="docutils literal notranslate"><span class="pre">McpServerUrlBasedConfig</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#langchain_mcp_tools_docs.SingleMcpServerConfig"><code class="docutils literal notranslate"><span class="pre">SingleMcpServerConfig</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#langchain_mcp_tools_docs.McpServersConfig"><code class="docutils literal notranslate"><span class="pre">McpServersConfig</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#langchain_mcp_tools_docs.McpServerCleanupFn"><code class="docutils literal notranslate"><span class="pre">McpServerCleanupFn</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#langchain_mcp_tools_docs.convert_mcp_to_langchain_tools"><code class="docutils literal notranslate"><span class="pre">convert_mcp_to_langchain_tools()</span></code></a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../index.html" title="previous chapter">langchain-mcp-tools-py</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
  <!-- Fixed position version badge -->
  <div style="position: fixed; top: 10px; right: 10px; z-index: 1000;">
    <span style="background: #2980B9; color: white; padding: 8px 12px; border-radius: 4px; font-weight: bold; font-size: 13px; box-shadow: 0 2px 4px rgba(0,0,0,0.2);">
      Version 0.2.8
    </span>
  </div>
  
  
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-langchain_mcp_tools_docs">
<span id="langchain-mcp-tools"></span><h1>langchain_mcp_tools<a class="headerlink" href="#module-langchain_mcp_tools_docs" title="Link to this heading">¶</a></h1>
<dl class="py exception">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.McpInitializationError">
<em class="property"><span class="k"><span class="pre">exception</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">langchain_mcp_tools_docs.</span></span><span class="sig-name descname"><span class="pre">McpInitializationError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/langchain_mcp_tools_docs.html#McpInitializationError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_mcp_tools_docs.McpInitializationError" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Raised when MCP server initialization fails.</p>
<p>This exception is raised when there are issues during MCP server setup,
connection, or configuration validation. It includes the server name
for better error context and debugging.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>) – Description of the initialization error</p></li>
<li><p><strong>server_name</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</span>) – Optional name of the MCP server that failed</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.McpInitializationError.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/langchain_mcp_tools_docs.html#McpInitializationError.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_mcp_tools_docs.McpInitializationError.__init__" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.McpServerCommandBasedConfig">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">langchain_mcp_tools_docs.</span></span><span class="sig-name descname"><span class="pre">McpServerCommandBasedConfig</span></span><a class="reference internal" href="../_modules/langchain_mcp_tools_docs.html#McpServerCommandBasedConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_mcp_tools_docs.McpServerCommandBasedConfig" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TypedDict</span></code></p>
<p>Configuration for an MCP server launched via command line.</p>
<p>This configuration is used for local MCP servers that are started as child
processes using the stdio client. It defines the command to run, optional
arguments, environment variables, working directory, and error logging
options.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.McpServerCommandBasedConfig.command">
<span class="sig-name descname"><span class="pre">command</span></span><a class="headerlink" href="#langchain_mcp_tools_docs.McpServerCommandBasedConfig.command" title="Link to this definition">¶</a></dt>
<dd><p>The executable command to run (e.g., “npx”, “uvx”, “python”).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.McpServerCommandBasedConfig.args">
<span class="sig-name descname"><span class="pre">args</span></span><a class="headerlink" href="#langchain_mcp_tools_docs.McpServerCommandBasedConfig.args" title="Link to this definition">¶</a></dt>
<dd><p>Optional list of command-line arguments to pass to the command.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.McpServerCommandBasedConfig.env">
<span class="sig-name descname"><span class="pre">env</span></span><a class="headerlink" href="#langchain_mcp_tools_docs.McpServerCommandBasedConfig.env" title="Link to this definition">¶</a></dt>
<dd><p>Optional dictionary of environment variables to set for the
process.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.McpServerCommandBasedConfig.cwd">
<span class="sig-name descname"><span class="pre">cwd</span></span><a class="headerlink" href="#langchain_mcp_tools_docs.McpServerCommandBasedConfig.cwd" title="Link to this definition">¶</a></dt>
<dd><p>Optional working directory where the command will be executed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.McpServerCommandBasedConfig.errlog">
<span class="sig-name descname"><span class="pre">errlog</span></span><a class="headerlink" href="#langchain_mcp_tools_docs.McpServerCommandBasedConfig.errlog" title="Link to this definition">¶</a></dt>
<dd><p>Optional file-like object for redirecting the server’s stderr
output.</p>
</dd></dl>

<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;npx&quot;</span><span class="p">,</span>
    <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;-y&quot;</span><span class="p">,</span> <span class="s2">&quot;@modelcontextprotocol/server-filesystem&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">],</span>
    <span class="s2">&quot;env&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;NODE_ENV&quot;</span><span class="p">:</span> <span class="s2">&quot;production&quot;</span><span class="p">},</span>
    <span class="s2">&quot;cwd&quot;</span><span class="p">:</span> <span class="s2">&quot;/path/to/working/directory&quot;</span><span class="p">,</span>
    <span class="s2">&quot;errlog&quot;</span><span class="p">:</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;server.log&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="id0">
<span class="sig-name descname"><span class="pre">command</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></em><a class="headerlink" href="#id0" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id1">
<span class="sig-name descname"><span class="pre">args</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">NotRequired</span></code><span class="pre">[</span><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code><span class="pre">]]]</span></em><a class="headerlink" href="#id1" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id2">
<span class="sig-name descname"><span class="pre">env</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">NotRequired</span></code><span class="pre">[</span><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code><span class="pre">,</span> <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code><span class="pre">]]]</span></em><a class="headerlink" href="#id2" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id3">
<span class="sig-name descname"><span class="pre">cwd</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">NotRequired</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> <span class="pre">|</span> <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code><span class="pre">]</span></em><a class="headerlink" href="#id3" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id4">
<span class="sig-name descname"><span class="pre">errlog</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">NotRequired</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">TextIO</span></code> <span class="pre">|</span> <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code><span class="pre">]</span></em><a class="headerlink" href="#id4" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.McpServerUrlBasedConfig">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">langchain_mcp_tools_docs.</span></span><span class="sig-name descname"><span class="pre">McpServerUrlBasedConfig</span></span><a class="reference internal" href="../_modules/langchain_mcp_tools_docs.html#McpServerUrlBasedConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_mcp_tools_docs.McpServerUrlBasedConfig" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TypedDict</span></code></p>
<p>Configuration for a remote MCP server accessed via URL.</p>
<p>This configuration is used for remote MCP servers that are accessed via
HTTP/HTTPS (Streamable HTTP, Server-Sent Events) or WebSocket connections.
It defines the URL to connect to and optional HTTP headers for authentication.</p>
<p>Note: Per MCP spec, clients should try Streamable HTTP first, then fallback
to SSE on 4xx errors for maximum compatibility.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.McpServerUrlBasedConfig.url">
<span class="sig-name descname"><span class="pre">url</span></span><a class="headerlink" href="#langchain_mcp_tools_docs.McpServerUrlBasedConfig.url" title="Link to this definition">¶</a></dt>
<dd><p>The URL of the remote MCP server. For HTTP/HTTPS servers,
use <a class="reference external" href="http://">http://</a> or <a class="reference external" href="https://">https://</a> prefix. For WebSocket servers,
use ws:// or wss:// prefix.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.McpServerUrlBasedConfig.transport">
<span class="sig-name descname"><span class="pre">transport</span></span><a class="headerlink" href="#langchain_mcp_tools_docs.McpServerUrlBasedConfig.transport" title="Link to this definition">¶</a></dt>
<dd><p>Optional transport type. Supported values:
“streamable_http” or “http” (recommended, attempted first),
“sse” (deprecated, fallback), “websocket”</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.McpServerUrlBasedConfig.type">
<span class="sig-name descname"><span class="pre">type</span></span><a class="headerlink" href="#langchain_mcp_tools_docs.McpServerUrlBasedConfig.type" title="Link to this definition">¶</a></dt>
<dd><p>Optional alternative field name for transport (for compatibility)</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.McpServerUrlBasedConfig.headers">
<span class="sig-name descname"><span class="pre">headers</span></span><a class="headerlink" href="#langchain_mcp_tools_docs.McpServerUrlBasedConfig.headers" title="Link to this definition">¶</a></dt>
<dd><p>Optional dictionary of HTTP headers to include in the request,
typically used for authentication (e.g., bearer tokens).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.McpServerUrlBasedConfig.timeout">
<span class="sig-name descname"><span class="pre">timeout</span></span><a class="headerlink" href="#langchain_mcp_tools_docs.McpServerUrlBasedConfig.timeout" title="Link to this definition">¶</a></dt>
<dd><p>Optional timeout for HTTP requests (default: 30.0 seconds).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.McpServerUrlBasedConfig.sse_read_timeout">
<span class="sig-name descname"><span class="pre">sse_read_timeout</span></span><a class="headerlink" href="#langchain_mcp_tools_docs.McpServerUrlBasedConfig.sse_read_timeout" title="Link to this definition">¶</a></dt>
<dd><p>Optional timeout for SSE connections (SSE only).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.McpServerUrlBasedConfig.terminate_on_close">
<span class="sig-name descname"><span class="pre">terminate_on_close</span></span><a class="headerlink" href="#langchain_mcp_tools_docs.McpServerUrlBasedConfig.terminate_on_close" title="Link to this definition">¶</a></dt>
<dd><p>Optional flag to terminate on connection close.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.McpServerUrlBasedConfig.httpx_client_factory">
<span class="sig-name descname"><span class="pre">httpx_client_factory</span></span><a class="headerlink" href="#langchain_mcp_tools_docs.McpServerUrlBasedConfig.httpx_client_factory" title="Link to this definition">¶</a></dt>
<dd><p>Optional factory for creating HTTP clients.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.McpServerUrlBasedConfig.auth">
<span class="sig-name descname"><span class="pre">auth</span></span><a class="headerlink" href="#langchain_mcp_tools_docs.McpServerUrlBasedConfig.auth" title="Link to this definition">¶</a></dt>
<dd><p>Optional httpx authentication for requests.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.McpServerUrlBasedConfig.__pre_validate_authentication">
<span class="sig-name descname"><span class="pre">__pre_validate_authentication</span></span><a class="headerlink" href="#langchain_mcp_tools_docs.McpServerUrlBasedConfig.__pre_validate_authentication" title="Link to this definition">¶</a></dt>
<dd><p>Optional flag to skip auth validation
(default: True). Set to False for OAuth flows that require
complex authentication flows.</p>
</dd></dl>

<p>Example for auto-detection (recommended):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://api.example.com/mcp&quot;</span><span class="p">,</span>
    <span class="c1"># Auto-tries Streamable HTTP first, falls back to SSE on 4xx</span>
    <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="s2">&quot;Bearer token123&quot;</span><span class="p">},</span>
    <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mf">60.0</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example for explicit Streamable HTTP:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://api.example.com/mcp&quot;</span><span class="p">,</span>
    <span class="s2">&quot;transport&quot;</span><span class="p">:</span> <span class="s2">&quot;streamable_http&quot;</span><span class="p">,</span>
    <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="s2">&quot;Bearer token123&quot;</span><span class="p">},</span>
    <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mf">60.0</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example for explicit SSE (legacy):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://example.com/mcp/sse&quot;</span><span class="p">,</span>
    <span class="s2">&quot;transport&quot;</span><span class="p">:</span> <span class="s2">&quot;sse&quot;</span><span class="p">,</span>
    <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="s2">&quot;Bearer token123&quot;</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Example for WebSocket:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;wss://example.com/mcp/ws&quot;</span><span class="p">,</span>
    <span class="s2">&quot;transport&quot;</span><span class="p">:</span> <span class="s2">&quot;websocket&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="id5">
<span class="sig-name descname"><span class="pre">url</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></em><a class="headerlink" href="#id5" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id6">
<span class="sig-name descname"><span class="pre">transport</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">NotRequired</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code><span class="pre">]</span></em><a class="headerlink" href="#id6" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id7">
<span class="sig-name descname"><span class="pre">type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">NotRequired</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code><span class="pre">]</span></em><a class="headerlink" href="#id7" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id8">
<span class="sig-name descname"><span class="pre">headers</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">NotRequired</span></code><span class="pre">[</span><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code><span class="pre">,</span> <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code><span class="pre">]]]</span></em><a class="headerlink" href="#id8" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id9">
<span class="sig-name descname"><span class="pre">timeout</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">NotRequired</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code><span class="pre">]</span></em><a class="headerlink" href="#id9" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id10">
<span class="sig-name descname"><span class="pre">sse_read_timeout</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">NotRequired</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code><span class="pre">]</span></em><a class="headerlink" href="#id10" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id11">
<span class="sig-name descname"><span class="pre">terminate_on_close</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">NotRequired</span></code><span class="pre">[</span><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code><span class="pre">]</span></em><a class="headerlink" href="#id11" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id12">
<span class="sig-name descname"><span class="pre">httpx_client_factory</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">NotRequired</span></code><span class="pre">[</span><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code><span class="pre">]</span></em><a class="headerlink" href="#id12" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id13">
<span class="sig-name descname"><span class="pre">auth</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><code class="xref py py-class docutils literal notranslate"><span class="pre">NotRequired</span></code><span class="pre">[</span><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code><span class="pre">]</span></em><a class="headerlink" href="#id13" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.SingleMcpServerConfig">
<span class="sig-prename descclassname"><span class="pre">langchain_mcp_tools_docs.</span></span><span class="sig-name descname"><span class="pre">SingleMcpServerConfig</span></span><a class="headerlink" href="#langchain_mcp_tools_docs.SingleMcpServerConfig" title="Link to this definition">¶</a></dt>
<dd><p>Configuration for a single MCP server, either command-based or URL-based.</p>
<p>This type represents the configuration for a single MCP server, which can be either:</p>
<ol class="arabic simple">
<li><p>A local server launched via command line (McpServerCommandBasedConfig)</p></li>
<li><p>A remote server accessed via URL (McpServerUrlBasedConfig)</p></li>
</ol>
<p>The type is determined by the presence of either the “command” key (for command-based)
or the “url” key (for URL-based).</p>
<p>alias of <a class="reference internal" href="#langchain_mcp_tools_docs.McpServerCommandBasedConfig" title="langchain_mcp_tools_docs.McpServerCommandBasedConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">McpServerCommandBasedConfig</span></code></a> | <a class="reference internal" href="#langchain_mcp_tools_docs.McpServerUrlBasedConfig" title="langchain_mcp_tools_docs.McpServerUrlBasedConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">McpServerUrlBasedConfig</span></code></a></p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.McpServersConfig">
<span class="sig-prename descclassname"><span class="pre">langchain_mcp_tools_docs.</span></span><span class="sig-name descname"><span class="pre">McpServersConfig</span></span><a class="headerlink" href="#langchain_mcp_tools_docs.McpServersConfig" title="Link to this definition">¶</a></dt>
<dd><p>Configuration dictionary for multiple MCP servers.</p>
<p>A dictionary mapping server names (as strings) to their respective configurations.
Each server name acts as a logical identifier used for logging and debugging.
The configuration for each server can be either command-based or URL-based.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;filesystem&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;npx&quot;</span><span class="p">,</span>
        <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;-y&quot;</span><span class="p">,</span> <span class="s2">&quot;@modelcontextprotocol/server-filesystem&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="s2">&quot;fetch&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;uvx&quot;</span><span class="p">,</span>
        <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;mcp-server-fetch&quot;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="s2">&quot;auto-detection-server&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://api.example.com/mcp&quot;</span><span class="p">,</span>
        <span class="c1"># Will try Streamable HTTP first, fallback to SSE on 4xx</span>
        <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="s2">&quot;Bearer token123&quot;</span><span class="p">},</span>
        <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mf">60.0</span>
    <span class="p">},</span>
    <span class="s2">&quot;explicit-sse-server&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://legacy.example.com/mcp/sse&quot;</span><span class="p">,</span>
        <span class="s2">&quot;transport&quot;</span><span class="p">:</span> <span class="s2">&quot;sse&quot;</span><span class="p">,</span>
        <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="s2">&quot;Bearer token123&quot;</span><span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <a class="reference internal" href="#langchain_mcp_tools_docs.McpServerCommandBasedConfig" title="langchain_mcp_tools_docs.McpServerCommandBasedConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">McpServerCommandBasedConfig</span></code></a> | <a class="reference internal" href="#langchain_mcp_tools_docs.McpServerUrlBasedConfig" title="langchain_mcp_tools_docs.McpServerUrlBasedConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">McpServerUrlBasedConfig</span></code></a>]</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.McpServerCleanupFn">
<span class="sig-prename descclassname"><span class="pre">langchain_mcp_tools_docs.</span></span><span class="sig-name descname"><span class="pre">McpServerCleanupFn</span></span><a class="headerlink" href="#langchain_mcp_tools_docs.McpServerCleanupFn" title="Link to this definition">¶</a></dt>
<dd><p>Type for the async cleanup function returned by convert_mcp_to_langchain_tools.</p>
<p>This function encapsulates the cleanup of all MCP server connections managed by
the AsyncExitStack. When called, it properly closes all transport connections,
sessions, and resources in the correct order.</p>
<p>Important: Always call this function when you’re done using the tools to prevent
resource leaks and ensure graceful shutdown of MCP server connections.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tools</span><span class="p">,</span> <span class="n">cleanup</span> <span class="o">=</span> <span class="k">await</span> <span class="n">convert_mcp_to_langchain_tools</span><span class="p">(</span><span class="n">server_configs</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="c1"># Use tools with your LangChain application...</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">tools</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">arun</span><span class="p">(</span><span class="n">param</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="c1"># Always cleanup, even if exceptions occur</span>
    <span class="k">await</span> <span class="n">cleanup</span><span class="p">()</span>
</pre></div>
</div>
<p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">Callable</span></code>[[], <code class="xref py py-class docutils literal notranslate"><span class="pre">Awaitable</span></code>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]]</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="langchain_mcp_tools_docs.convert_mcp_to_langchain_tools">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">langchain_mcp_tools_docs.</span></span><span class="sig-name descname"><span class="pre">convert_mcp_to_langchain_tools</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">server_configs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/langchain_mcp_tools_docs.html#convert_mcp_to_langchain_tools"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_mcp_tools_docs.convert_mcp_to_langchain_tools" title="Link to this definition">¶</a></dt>
<dd><p>Initialize multiple MCP servers and convert their tools to LangChain format.</p>
<p>This is the main entry point for the library. It orchestrates the complete
lifecycle of multiple MCP server connections, from initialization through
tool conversion to cleanup. Provides robust error handling and authentication
pre-validation to prevent common MCP client library issues.</p>
<p>Key Features:
- Parallel initialization of multiple servers for efficiency
- Authentication pre-validation for HTTP servers to prevent async generator bugs
- Automatic transport selection and fallback per MCP specification
- Comprehensive error handling with McpInitializationError
- User-controlled cleanup via returned async function
- Support for both local (stdio) and remote (HTTP/WebSocket) servers</p>
<p>Transport Support:
- stdio: Local command-based servers (npx, uvx, python, etc.)
- streamable_http: Modern HTTP servers (recommended, tried first)
- sse: Legacy Server-Sent Events HTTP servers (fallback)
- websocket: WebSocket servers for real-time communication</p>
<p>Error Handling:
All configuration and connection errors are wrapped in McpInitializationError
with server context for easy debugging. Authentication failures are detected
early to prevent async generator cleanup issues in the MCP client library.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>server_configs</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<a class="reference internal" href="#langchain_mcp_tools_docs.McpServerCommandBasedConfig" title="langchain_mcp_tools_docs.McpServerCommandBasedConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">McpServerCommandBasedConfig</span></code></a>, <a class="reference internal" href="#langchain_mcp_tools_docs.McpServerUrlBasedConfig" title="langchain_mcp_tools_docs.McpServerUrlBasedConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">McpServerUrlBasedConfig</span></code></a>]]</span>) – Dictionary mapping server names to configurations.
Each config can be either McpServerCommandBasedConfig for local
servers or McpServerUrlBasedConfig for remote servers.</p></li>
<li><p><strong>logger</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Logger</span></code>]</span>) – Optional logger instance. If None, creates a pre-configured
logger with appropriate levels for MCP debugging.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>List[BaseTool]: All tools from all servers, ready for LangChain use</p></li>
<li><p>McpServerCleanupFn: Async function to properly shutdown all connections</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>A tuple containing</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#langchain_mcp_tools_docs.McpInitializationError" title="langchain_mcp_tools_docs.McpInitializationError"><strong>McpInitializationError</strong></a> – If any server fails to initialize with detailed context</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">server_configs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;local-filesystem&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;npx&quot;</span><span class="p">,</span>
        <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;-y&quot;</span><span class="p">,</span> <span class="s2">&quot;@modelcontextprotocol/server-filesystem&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="s2">&quot;remote-api&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://api.example.com/mcp&quot;</span><span class="p">,</span>
        <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="s2">&quot;Bearer your-token&quot;</span><span class="p">},</span>
        <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mf">30.0</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">tools</span><span class="p">,</span> <span class="n">cleanup</span> <span class="o">=</span> <span class="k">await</span> <span class="n">convert_mcp_to_langchain_tools</span><span class="p">(</span><span class="n">server_configs</span><span class="p">)</span>

    <span class="c1"># Use tools with your LangChain application</span>
    <span class="k">for</span> <span class="n">tool</span> <span class="ow">in</span> <span class="n">tools</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">tool</span><span class="o">.</span><span class="n">arun</span><span class="p">(</span><span class="o">**</span><span class="n">tool_args</span><span class="p">)</span>

<span class="k">except</span> <span class="n">McpInitializationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to initialize MCP server &#39;</span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">server_name</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">finally</span><span class="p">:</span>
    <span class="c1"># Always cleanup when done</span>
    <span class="k">await</span> <span class="n">cleanup</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>

    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;2025, hideya.
      
      |
      <a href="../_sources/modules/langchain_mcp_tools.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>